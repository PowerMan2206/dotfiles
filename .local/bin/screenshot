#!/bin/bash

save() { 
	tee ~/scrs/$(date +'%Y-%m-%d_%H:%M:%S.png') | wl-copy 
}

case $1 in
	area ) grim -c -g "$(slurp -b 181b28ba -c e8e7e4 -d -w 1)" - | save ;;
	window ) grim -g "$(swaymsg -t get_tree | jq -r 'recurse(.nodes[]?, .floating_nodes[]?) | select(.focused)' | jq -r '.rect | "\(.x),\(.y) \(.width)x\(.height)"')" - | save ;;
	dots )
		for i in {1..3}; do
			read -sn 1
			wl-paste > scr"$i".png
			echo "scr$i.png created"
		done
		
		convert scr1.png scr2.png scr3.png -append screenshot.png
		rm scr1.png scr2.png scr3.png
		;;
esac 
